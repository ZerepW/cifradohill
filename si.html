<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Seguridad Informática - Cifrado Hill</title>
    <style>
        label{
            font-weight: bold;
        }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous"> 
</head>
<body style="background-color:#eeeeee;padding-top:15px;">
    <div class="container" style="padding-top:20px; background-color:#fff; border-radius:15px;">
        <h1>Cifrado Hill (Matrices NxN)</h1>
        <hr><br>
        <form>
            <div class="form-group">
                <label for="alfabeto">Alfabeto</label>
                <input type="text" class="form-control text-uppercase" id="alfabeto" aria-describedby="alfabeto" placeholder="EJEMPLO: ABCDEF1234" maxlength="256">
                <small id="alfabetoHelp" class="form-text text-muted">Alfabeto a utilizar, máximo 256 caracteres.</small>
            </div><br>

            <div class="form-group">
                <label for="matriz">Tamaño de la matriz (N)</label>
                <select class="form-control" id="matriz">
                    <option selected>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                </select>
            </div><br>
            <div class="row">
                <div class="form-group col-sm-6">
                    <label for="cifrar">Texto a Cifrar/Descifrar</label>
                    <textarea class="form-control text-uppercase" id="cifrar" rows="4">Texto de Ejemplo</textarea>
                </div>
                <div class="form-group col-sm-6">
                    <label for="clave">Clave</label>
                    <textarea class="form-control text-uppercase" id="clave" rows="4">ClaveEjemplo</textarea>
                </div>
            </div><br>
        </form>
        
            <center>
                <button onclick="cifrar()" class="btn btn-outline-primary btn-lg">Cifrar</button>
                <button onclick="descifrar()" class="btn btn-outline-success btn-lg">Descifrar</button>
                <button onclick="limpiar()" class="btn btn-outline-warning btn-lg">Limpiar</button>
            </center>
        <br>
            <div class="form-group">
                <label for="clave">Resultado</label>
                <textarea class="form-control" id="clave" rows="4">ASDHASDFGG</textarea>
            </div>
            <hr>
            <span class="float-left">Hecho por <a href="http://luisarturozerep.cloudapp.net">Luis Arturo Pérez Díaz</a> || Alma Karolina Barrera Rodríguez</span>
            <span class="float-right"><a href="http://antonioch.com">Seguridad Informática AD 2017</a></span><br><br><br>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script>
        function cifrar(){
            alfabeto = document.getElementById("alfabeto");
            alfabeto = alfabeto.value.toUpperCase();
            
            textocifrar = document.getElementById("cifrar");
            textocifrar = textocifrar.value.toUpperCase();
            textocifrarlong = textocifrar.length;
            
            clave = document.getElementById("clave");
            clave = clave.value.toUpperCase();
            clavelong = clave.length;

            nmatriz = document.getElementById("matriz");
            nmatriz = nmatriz.value;

            multiplo = textocifrarlong % nmatriz; //CHECAR SI ES MULTIPLO DE N
            permitido = true;

            if(multiplo == 0){
                for (var i = 0; i < textocifrar.length; i++) {
                    var indice = null;
		    		for (var x = 0; x < alfabeto.length; x++) {
		    			if(alfabeto[x] == textocifrar[i]){
		    				indice = x;
		    				break;
		    			}
		    		}
		    		if(indice == null){
		    			permitido=false;
                        break;
		    		}
                }
                if(permitido){
                    if((nmatriz*nmatriz)==clavelong){ //LA CLAVE ES UNA RC Exacta
                        result = "";
                        for(var bloq = 0; bloq<textocifrarlong; bloq += parseInt(nmatriz)){
                            var arregloC = [];
                            for(var indice = 0; indice < nmatriz; indice++){
                                arregloC.push(parseInt(bloq)+parseInt(indice));
                            }
                            for(var indice = 0; indice < nmatriz; indice++){
                                arregloC
                                alert(arregloC[indice]);
                            }
                            alert("Arreglo C: " + arregloC);
                        }
                    }else{
                        alert("ERROR! La clave no es una raiz cuadrada exacta");
                    }
                }else{
                    alert("ERROR! Hay letras que no están en el abecedario")
                }
            }else{
                alert("ERROR! El texto a cifrar no es multiplo de N");
            }
            
        }
        function descifrar(){
            alert("Estoy descifrando!");
        }
        function limpiar(){
            alert("Estoy limpiando!");
        }
    </script>
</body>
</html>